aW1wb3J0IHsgaW8sIFNvY2tldCB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnOw0K
DQpjbGFzcyBTb2NrZXRTZXJ2aWNlIHsNCiAgcHJpdmF0ZSBzb2NrZXQ6IFNvY2tl
dCB8IG51bGwgPSBudWxsOw0KICBwcml2YXRlIGJhc2VVcmwgPSAnaHR0cDovL2xv
Y2FsaG9zdDozMDAxJzsNCg0KICBjb25uZWN0KHRva2VuPzogc3RyaW5nKSB7DQog
ICAgaWYgKHRoaXMuc29ja2V0Py5jb25uZWN0ZWQpIHsNCiAgICAgIHJldHVybiB0
aGlzLnNvY2tldDsNCiAgICB9DQoNCiAgICB0cnkgew0KICAgICAgdGhpcy5zb2Nr
ZXQgPSBpbyhgJHt0aGlzLmJhc2VVcmx9L2FkbWluL3B1cmNoYXNlLXJlcXVlc3Rz
YCwgew0KICAgICAgICBhdXRoOiB7DQogICAgICAgICAgdG9rZW46IHRva2VuIHx8
IHRoaXMuZ2V0QXV0aFRva2VuKCksDQogICAgICAgIH0sDQogICAgICAgIHRyYW5z
cG9ydHM6IFsnd2Vic29ja2V0JywgJ3BvbGxpbmcnXSwNCiAgICAgIH0pOw0KDQog
ICAgICB0aGlzLnNldHVwRXZlbnRIYW5kbGVycygpOw0KICAgICAgcmV0dXJuIHRo
aXMuc29ja2V0Ow0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICBjb25zb2xl
LmVycm9yKCdGYWlsZWQgdG8gY29ubmVjdCB0byBzb2NrZXQgc2VydmVyOicsIGVy
cm9yKTsNCiAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCiAgfQ0KDQogIGRpc2Nv
bm5lY3QoKSB7DQogICAgaWYgKHRoaXMuc29ja2V0KSB7DQogICAgICB0aGlzLnNv
Y2tldC5kaXNjb25uZWN0KCk7DQogICAgICB0aGlzLnNvY2tldCA9IG51bGw7DQog
ICAgfQ0KICB9DQoNCiAgcHJpdmF0ZSBnZXRBdXRoVG9rZW4oKTogc3RyaW5nIHwg
bnVsbCB7DQogICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7
DQogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2Vu
Jyk7DQogICAgfQ0KICAgIHJldHVybiBudWxsOw0KICB9DQoNCiAgcHJpdmF0ZSBz
ZXR1cEV2ZW50SGFuZGxlcnMoKSB7DQogICAgaWYgKCF0aGlzLnNvY2tldCkgcmV0
dXJuOw0KDQogICAgdGhpcy5zb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7DQog
ICAgICBjb25zb2xlLmxvZygnU29ja2V0IGNvbm5lY3RlZDonLCB0aGlzLnNvY2tl
dD8uaWQpOw0KICAgICAgdGhpcy5qb2luQWRtaW5Sb29tKCk7DQogICAgfSk7DQoN
CiAgICB0aGlzLnNvY2tldC5vbignZGlzY29ubmVjdCcsIChyZWFzb24pID0+IHsN
CiAgICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgZGlzY29ubmVjdGVkOicsIHJlYXNv
bik7DQogICAgfSk7DQogIH0NCg0KICBwcml2YXRlIGpvaW5BZG1pblJvb20oKSB7
DQogICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7DQogICAg
ICBjb25zdCB1c2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsNCiAg
ICAgIGlmICh1c2VyKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgY29uc3Qg
dXNlckRhdGEgPSBKU09OLnBhcnNlKHVzZXIpOw0KICAgICAgICAgIHRoaXMuc29j
a2V0Py5lbWl0KCdqb2luLWFkbWluLXJvb20nLCB7DQogICAgICAgICAgICBhZG1p
bklkOiB1c2VyRGF0YS5pZCwNCiAgICAgICAgICAgIHJvbGU6IHVzZXJEYXRhLnJv
bGUNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAg
ICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIHVzZXIgZGF0YTon
LCBlcnJvcik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICBv
bk5ld1B1cmNoYXNlUmVxdWVzdChjYWxsYmFjazogKGRhdGE6IGFueSkgPT4gdm9p
ZCkgew0KICAgIHRoaXMuc29ja2V0Py5vbignbmV3LXB1cmNoYXNlLXJlcXVlc3Qn
LCBjYWxsYmFjayk7DQogIH0NCg0KICBvblB1cmNoYXNlUmVxdWVzdFJlamVjdGVk
KGNhbGxiYWNrOiAoZGF0YTogYW55KSA9PiB2b2lkKSB7DQogICAgdGhpcy5zb2Nr
ZXQ/Lm9uKCdwdXJjaGFzZS1yZXF1ZXN0LXJlamVjdGVkJywgY2FsbGJhY2spOw0K
ICB9DQoNCiAgb25QdXJjaGFzZVJlcXVlc3RBcHByb3ZlZChjYWxsYmFjazogKGRh
dGE6IGFueSkgPT4gdm9pZCkgew0KICAgIHRoaXMuc29ja2V0Py5vbigncHVyY2hh
c2UtcmVxdWVzdC1hcHByb3ZlZCcsIGNhbGxiYWNrKTsNCiAgfQ0KDQogIG9uUHVy
Y2hhc2VSZXF1ZXN0U3RhdHVzQ2hhbmdlZChjYWxsYmFjazogKGRhdGE6IGFueSkg
PT4gdm9pZCkgew0KICAgIHRoaXMuc29ja2V0Py5vbigncHVyY2hhc2UtcmVxdWVz
dC1zdGF0dXMtY2hhbmdlZCcsIGNhbGxiYWNrKTsNCiAgfQ0KDQogIG9mZk5ld1B1
cmNoYXNlUmVxdWVzdChjYWxsYmFjaz86IChkYXRhOiBhbnkpID0+IHZvaWQpIHsN
CiAgICB0aGlzLnNvY2tldD8ub2ZmKCduZXctcHVyY2hhc2UtcmVxdWVzdCcsIGNh
bGxiYWNrKTsNCiAgfQ0KDQogIG9mZlB1cmNoYXNlUmVxdWVzdFJlamVjdGVkKGNh
bGxiYWNrPzogKGRhdGE6IGFueSkgPT4gdm9pZCkgew0KICAgIHRoaXMuc29ja2V0
Py5vZmYoJ3B1cmNoYXNlLXJlcXVlc3QtcmVqZWN0ZWQnLCBjYWxsYmFjayk7DQog
IH0NCg0KICBvZmZQdXJjaGFzZVJlcXVlc3RBcHByb3ZlZChjYWxsYmFjaz86IChk
YXRhOiBhbnkpID0+IHZvaWQpIHsNCiAgICB0aGlzLnNvY2tldD8ub2ZmKCdwdXJj
aGFzZS1yZXF1ZXN0LWFwcHJvdmVkJywgY2FsbGJhY2spOw0KICB9DQoNCiAgb2Zm
UHVyY2hhc2VSZXF1ZXN0U3RhdHVzQ2hhbmdlZChjYWxsYmFjaz86IChkYXRhOiBh
bnkpID0+IHZvaWQpIHsNCiAgICB0aGlzLnNvY2tldD8ub2ZmKCdwdXJjaGFzZS1y
ZXF1ZXN0LXN0YXR1cy1jaGFuZ2VkJywgY2FsbGJhY2spOw0KICB9DQoNCiAgZ2V0
U29ja2V0KCk6IFNvY2tldCB8IG51bGwgew0KICAgIHJldHVybiB0aGlzLnNvY2tl
dDsNCiAgfQ0KDQogIGlzQ29ubmVjdGVkKCk6IGJvb2xlYW4gew0KICAgIHJldHVy
biB0aGlzLnNvY2tldD8uY29ubmVjdGVkIHx8IGZhbHNlOw0KICB9DQp9DQoNCmNv
bnN0IHNvY2tldFNlcnZpY2UgPSBuZXcgU29ja2V0U2VydmljZSgpOw0KZXhwb3J0
IGRlZmF1bHQgc29ja2V0U2VydmljZTsNCg0KLy8gRW5hYmxlIFNvY2tldC5JTyBk
ZWJ1Z2dpbmcgb25seSBpbiBicm93c2VyDQppZiAodHlwZW9mIHdpbmRvdyAhPT0g
J3VuZGVmaW5lZCcpIHsNCiAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1
bmRlZmluZWQnKSB7DQogICAgbG9jYWxTdG9yYWdlLmRlYnVnID0gJ3NvY2tldC5p
by1jbGllbnQ6c29ja2V0JzsNCiAgfQ0KfQ0KDQoADQoA
